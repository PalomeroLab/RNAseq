#!/usr/bin/env python3

from pathlib import Path
import shutil

base_dir = Path.home() / "data" / "duplicates"

for sample_dir in base_dir.iterdir():
    if not sample_dir.is_dir():
        continue

    fastq_subdir = sample_dir / "fastq"
    if fastq_subdir.exists() and fastq_subdir.is_dir():
        for f in fastq_subdir.iterdir():
            if f.is_file():
                dest = sample_dir / f.name
                print(f"Moving {f} -> {dest}")
                shutil.move(str(f), dest)
        print(f"Removing empty directory {fastq_subdir}")
        fastq_subdir.rmdir()
